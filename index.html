<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="O&A Books â€” Pre-loved French immersion and English books for kids. Buy direct, better prices. Flat $4.99 shipping."/>
  <title>O&A Books</title>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;1,400;1,500&family=Jost:wght@300;400;500;600&display=swap" rel="stylesheet"/>
  <style>
    :root {
      --white:#ffffff; --off:#f8f5f0; --warm:#ede8e0;
      --ink:#1c1a17; --mid:#4a4640; --muted:#9a9088; --line:#e2ddd6;
      --terra:#b85c38; --terra-lt:#f2e8e3; --terra-dk:#8f3e22;
    }
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
    html{scroll-behavior:smooth;}
    body{background:var(--white);color:var(--ink);font-family:'Jost',sans-serif;font-weight:300;line-height:1.6;}

    nav{background:var(--white);border-bottom:1px solid var(--line);padding:0 5vw;display:flex;align-items:center;justify-content:space-between;height:62px;position:sticky;top:0;z-index:500;}
    .nav-logo{font-family:'Cormorant Garamond',serif;font-weight:600;font-size:1.45rem;color:var(--ink);text-decoration:none;letter-spacing:0.12em;text-transform:uppercase;}
    .nav-center{display:flex;gap:2.2rem;align-items:center;}
    .nav-center a{color:var(--mid);text-decoration:none;font-size:0.72rem;font-weight:500;letter-spacing:0.14em;text-transform:uppercase;transition:color 0.2s;padding:0.2rem 0;border-bottom:1px solid transparent;}
    .nav-center a:hover{color:var(--ink);border-bottom-color:var(--ink);}
    .nav-admin{color:var(--muted)!important;font-size:0.65rem!important;}
    .nav-admin:hover{color:var(--terra)!important;border-bottom-color:var(--terra)!important;}
    .cart-btn{display:flex;align-items:center;gap:0.5rem;background:none;border:1px solid var(--ink);color:var(--ink);padding:0.4rem 1rem;font-family:'Jost',sans-serif;font-size:0.72rem;font-weight:500;letter-spacing:0.12em;text-transform:uppercase;cursor:pointer;transition:all 0.2s;}
    .cart-btn:hover{background:var(--ink);color:var(--white);}
    .cart-count{background:var(--terra);color:white;border-radius:50%;width:18px;height:18px;font-size:0.65rem;font-weight:500;display:flex;align-items:center;justify-content:center;}
    .cart-count.bump{animation:bump 0.3s ease;}

    .hero{display:grid;grid-template-columns:1fr 1fr;min-height:480px;}
    .hero-text{background:var(--off);padding:5rem 5vw;display:flex;flex-direction:column;justify-content:center;}
    .hero-eyebrow{font-size:0.68rem;font-weight:500;letter-spacing:0.2em;text-transform:uppercase;color:var(--terra);margin-bottom:1.2rem;animation:fadeUp 0.7s ease both;}
    .hero h1{font-family:'Cormorant Garamond',serif;font-weight:500;font-size:clamp(2.8rem,4.5vw,4.2rem);line-height:1.05;color:var(--ink);margin-bottom:1.4rem;animation:fadeUp 0.7s 0.08s ease both;}
    .hero h1 em{font-style:italic;color:var(--terra);}
    .hero-desc{font-size:0.92rem;color:var(--mid);line-height:1.75;max-width:42ch;margin-bottom:2rem;animation:fadeUp 0.7s 0.16s ease both;}
    .hero-cta{display:inline-block;background:var(--ink);color:var(--white);padding:0.8rem 2rem;font-size:0.72rem;font-weight:500;letter-spacing:0.16em;text-transform:uppercase;text-decoration:none;border:1px solid var(--ink);transition:all 0.2s;animation:fadeUp 0.7s 0.22s ease both;align-self:flex-start;}
    .hero-cta:hover{background:var(--white);color:var(--ink);}
    .hero-visual{background:var(--warm);display:flex;align-items:center;justify-content:center;overflow:hidden;padding:2.5rem 2rem;}
    .hero-covers{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;width:100%;max-width:300px;}
    .hero-cover{aspect-ratio:2/3;overflow:hidden;border-radius:2px;box-shadow:4px 4px 14px rgba(0,0,0,0.18);transition:transform 0.3s;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:0.5rem;text-align:center;position:relative;}
    .hero-cover:hover{transform:translateY(-5px);}
    .hero-cover img{width:100%;height:100%;object-fit:cover;position:absolute;inset:0;}
    .hero-cover.tall{grid-row:span 2;aspect-ratio:unset;}
    .css-book-title{font-family:'Cormorant Garamond',serif;font-style:italic;font-size:0.7rem;color:rgba(255,255,255,0.92);line-height:1.3;z-index:1;}
    .css-book-author{font-size:0.55rem;color:rgba(255,255,255,0.6);margin-top:0.3rem;letter-spacing:0.06em;z-index:1;}
    .css-book-flag{font-size:1rem;margin-bottom:0.4rem;z-index:1;}

    .strip{background:var(--ink);padding:0.75rem 5vw;display:flex;align-items:center;justify-content:center;gap:3rem;flex-wrap:wrap;}
    .strip-item{font-size:0.7rem;letter-spacing:0.14em;text-transform:uppercase;color:rgba(255,255,255,0.55);display:flex;align-items:center;gap:0.5rem;}
    .strip-dot{width:3px;height:3px;background:var(--terra);border-radius:50%;}

    .disc-bar{background:var(--terra-lt);border-top:1px solid #d9c0b5;border-bottom:1px solid #d9c0b5;padding:0.6rem 5vw;display:flex;align-items:center;justify-content:center;gap:2.5rem;flex-wrap:wrap;}
    .disc-item{display:flex;align-items:center;gap:0.5rem;font-size:0.72rem;color:var(--terra-dk);}
    .disc-tag{font-weight:600;}

    .filter-bar{background:var(--white);border-bottom:1px solid var(--line);padding:0.75rem 5vw;display:flex;align-items:center;gap:0.5rem;flex-wrap:wrap;position:sticky;top:62px;z-index:200;}
    .filter-label{font-size:0.65rem;font-weight:500;letter-spacing:0.16em;text-transform:uppercase;color:var(--muted);margin-right:0.5rem;}
    .filter-btn{background:none;border:1px solid var(--line);color:var(--mid);padding:0.28rem 0.9rem;font-family:'Jost',sans-serif;font-size:0.68rem;font-weight:500;letter-spacing:0.1em;text-transform:uppercase;cursor:pointer;transition:all 0.18s;}
    .filter-btn:hover{border-color:var(--ink);color:var(--ink);}
    .filter-btn.active{background:var(--ink);color:var(--white);border-color:var(--ink);}
    .search-wrap{margin-left:auto;position:relative;}
    .search-wrap input{background:var(--off);border:1px solid var(--line);padding:0.32rem 1rem 0.32rem 2rem;font-family:'Jost',sans-serif;font-size:0.78rem;color:var(--ink);outline:none;width:200px;transition:width 0.3s,border-color 0.2s;}
    .search-wrap input:focus{border-color:var(--ink);width:240px;}
    .search-wrap input::placeholder{color:var(--muted);}
    .search-icon{position:absolute;left:0.65rem;top:50%;transform:translateY(-50%);color:var(--muted);font-size:0.75rem;pointer-events:none;}

    .catalog-section{padding:3rem 5vw 5rem;}
    .catalog-header{display:flex;align-items:baseline;justify-content:space-between;margin-bottom:2.5rem;border-bottom:1px solid var(--line);padding-bottom:1rem;}
    .catalog-title{font-family:'Cormorant Garamond',serif;font-weight:500;font-size:1.6rem;letter-spacing:0.08em;text-transform:uppercase;}
    .catalog-count{font-size:0.72rem;color:var(--muted);}
    .book-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:2rem;}

    .book-card{display:flex;flex-direction:column;animation:fadeUp 0.5s ease both;}
    .book-img-wrap{height:260px;background:var(--off);display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative;margin-bottom:0.9rem;}
    .book-img-wrap img{width:100%;height:100%;object-fit:cover;transition:transform 0.4s;}
    .book-card:hover .book-img-wrap img{transform:scale(1.04);}
    .book-placeholder{font-size:3.5rem;opacity:0.2;}
    .lang-tag{position:absolute;top:0.7rem;left:0.7rem;background:var(--white);font-size:0.9rem;width:26px;height:26px;display:flex;align-items:center;justify-content:center;border-radius:50%;box-shadow:0 1px 4px rgba(0,0,0,0.12);}
    .cond-tag{position:absolute;bottom:0.7rem;right:0.7rem;background:var(--white);color:var(--mid);font-size:0.6rem;font-weight:500;letter-spacing:0.1em;text-transform:uppercase;padding:0.18rem 0.5rem;}
    .sold-overlay{position:absolute;inset:0;background:rgba(255,255,255,0.7);display:flex;align-items:center;justify-content:center;}
    .sold-label{font-family:'Cormorant Garamond',serif;font-style:italic;font-size:1.6rem;color:var(--terra);border:1px solid var(--terra);padding:0.2rem 1rem;background:rgba(255,255,255,0.9);transform:rotate(-8deg);}
    .book-series{font-size:0.62rem;font-weight:500;letter-spacing:0.14em;text-transform:uppercase;color:var(--muted);margin-bottom:0.25rem;}
    .book-title{font-family:'Cormorant Garamond',serif;font-weight:500;font-size:1.05rem;line-height:1.3;margin-bottom:0.2rem;}
    .book-author{font-size:0.75rem;color:var(--muted);margin-bottom:0.5rem;}
    .book-age{font-size:0.65rem;font-weight:500;letter-spacing:0.1em;text-transform:uppercase;color:var(--terra);}
    .book-footer{display:flex;align-items:center;justify-content:space-between;margin-top:0.8rem;padding-top:0.8rem;border-top:1px solid var(--line);}
    .book-price{font-family:'Cormorant Garamond',serif;font-size:1.2rem;font-weight:500;color:var(--ink);}
    .add-cart-btn{background:none;border:1px solid var(--ink);color:var(--ink);padding:0.32rem 0.9rem;font-family:'Jost',sans-serif;font-size:0.65rem;font-weight:500;letter-spacing:0.12em;text-transform:uppercase;cursor:pointer;transition:all 0.18s;white-space:nowrap;}
    .add-cart-btn:hover:not(:disabled){background:var(--ink);color:var(--white);}
    .add-cart-btn:disabled{opacity:0.35;cursor:not-allowed;}
    .add-cart-btn.added{background:var(--terra);color:white;border-color:var(--terra);}
    .empty-state{text-align:center;padding:5rem 2rem;grid-column:1/-1;}
    .empty-state p{font-size:0.9rem;color:var(--muted);}

    .why-section{background:var(--off);padding:4rem 5vw;border-top:1px solid var(--line);}
    .why-title{font-family:'Cormorant Garamond',serif;font-weight:500;font-size:clamp(1.8rem,3vw,2.6rem);text-align:center;margin-bottom:0.5rem;}
    .why-title em{font-style:italic;color:var(--terra);}
    .why-sub{text-align:center;font-size:0.82rem;color:var(--muted);margin-bottom:3rem;}
    .why-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:2rem;max-width:960px;margin:0 auto;}
    .why-card{text-align:center;}
    .why-icon{font-size:1.8rem;margin-bottom:0.8rem;display:block;}
    .why-card h3{font-family:'Cormorant Garamond',serif;font-size:1.05rem;font-weight:500;letter-spacing:0.06em;text-transform:uppercase;margin-bottom:0.5rem;}
    .why-card p{font-size:0.8rem;color:var(--muted);line-height:1.7;}

    .cart-backdrop{position:fixed;inset:0;background:rgba(28,26,23,0.4);z-index:600;opacity:0;pointer-events:none;transition:opacity 0.3s;}
    .cart-backdrop.open{opacity:1;pointer-events:all;}
    .cart-drawer{position:fixed;top:0;right:0;bottom:0;width:min(420px,100vw);background:var(--white);z-index:700;display:flex;flex-direction:column;transform:translateX(100%);transition:transform 0.38s cubic-bezier(0.4,0,0.2,1);border-left:1px solid var(--line);box-shadow:-4px 0 24px rgba(0,0,0,0.08);}
    .cart-drawer.open{transform:translateX(0);}
    .cart-head{padding:1.4rem 1.5rem;border-bottom:1px solid var(--line);display:flex;align-items:center;justify-content:space-between;}
    .cart-head-title{font-family:'Cormorant Garamond',serif;font-size:1.15rem;font-weight:500;letter-spacing:0.1em;text-transform:uppercase;}
    .cart-close{background:none;border:none;color:var(--muted);font-size:1.3rem;cursor:pointer;transition:color 0.15s;}
    .cart-close:hover{color:var(--ink);}
    .cart-items{flex:1;overflow-y:auto;padding:1rem 1.5rem;}
    .cart-empty{text-align:center;padding:3rem 1rem;}
    .cart-empty p{font-size:0.85rem;color:var(--muted);}
    .cart-item{display:flex;gap:0.9rem;padding:1rem 0;border-bottom:1px solid var(--line);animation:fadeUp 0.25s ease both;}
    .ci-img{width:56px;height:72px;background:var(--off);flex-shrink:0;overflow:hidden;display:flex;align-items:center;justify-content:center;font-size:1.5rem;}
    .ci-img img{width:100%;height:100%;object-fit:cover;}
    .ci-info{flex:1;}
    .ci-title{font-family:'Cormorant Garamond',serif;font-size:0.95rem;font-weight:500;line-height:1.3;margin-bottom:0.15rem;}
    .ci-author{font-size:0.72rem;color:var(--muted);margin-bottom:0.35rem;}
    .ci-price{font-size:0.88rem;color:var(--ink);}
    .ci-disc{font-size:0.68rem;color:var(--terra);}
    .ci-remove{background:none;border:none;color:var(--muted);font-size:1rem;cursor:pointer;transition:color 0.15s;align-self:flex-start;padding:0.2rem;}
    .ci-remove:hover{color:var(--terra);}
    .cart-disc-note{background:var(--terra-lt);border-left:3px solid var(--terra);padding:0.6rem 0.9rem;font-size:0.78rem;color:var(--terra-dk);margin-top:0.5rem;}
    .cart-footer{padding:1.2rem 1.5rem;border-top:1px solid var(--line);}
    .total-row{display:flex;justify-content:space-between;font-size:0.82rem;padding:0.28rem 0;color:var(--muted);}
    .total-row.discount{color:var(--terra);}
    .total-row.grand{font-family:'Cormorant Garamond',serif;font-size:1.1rem;color:var(--ink);border-top:1px solid var(--line);margin-top:0.4rem;padding-top:0.6rem;}
    .pay-label{font-size:0.62rem;font-weight:500;text-transform:uppercase;letter-spacing:0.16em;color:var(--muted);margin:1rem 0 0.7rem;}
    .pay-stripe{width:100%;background:var(--ink);color:white;border:1px solid var(--ink);padding:0.85rem;font-family:'Jost',sans-serif;font-size:0.75rem;font-weight:500;letter-spacing:0.14em;text-transform:uppercase;cursor:pointer;margin-bottom:0.6rem;transition:all 0.2s;display:flex;align-items:center;justify-content:center;gap:0.5rem;}
    .pay-stripe:hover{background:var(--mid);}
    .pay-paypal-me{width:100%;background:#ffc439;color:#003087;border:1px solid #e0a800;padding:0.85rem;font-family:'Jost',sans-serif;font-size:0.75rem;font-weight:600;letter-spacing:0.12em;text-transform:uppercase;cursor:pointer;transition:background 0.2s;display:flex;align-items:center;justify-content:center;gap:0.6rem;}
    .pay-paypal-me:hover{background:#f0b429;}
    .pay-divider{text-align:center;font-size:0.65rem;color:var(--muted);letter-spacing:0.1em;text-transform:uppercase;margin:0.5rem 0;}
    .secure-note{text-align:center;font-size:0.65rem;color:var(--muted);margin-top:0.9rem;}

    footer{background:var(--ink);color:rgba(255,255,255,0.4);text-align:center;padding:2.5rem 5vw;font-size:0.72rem;letter-spacing:0.08em;}
    footer strong{color:rgba(255,255,255,0.75);}
    footer a{color:rgba(255,255,255,0.4);text-decoration:none;transition:color 0.2s;}
    footer a:hover{color:rgba(255,255,255,0.8);}
    .footer-links{display:flex;gap:2.5rem;justify-content:center;margin-bottom:1rem;flex-wrap:wrap;}

    @keyframes fadeUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
    @keyframes bump{0%,100%{transform:scale(1)}50%{transform:scale(1.4)}}

    @media(max-width:760px){
      .hero{grid-template-columns:1fr;}
      .hero-visual{display:none;}
      .nav-center{display:none;}
      .search-wrap{width:100%;margin-left:0;}
      .search-wrap input{width:100%;}
    }
  </style>
</head>
<body>

<nav>
  <a class="nav-logo" href="index.html">O&amp;A Books</a>
  <div class="nav-center">
    <a href="#catalog">Shop</a>
    <a href="policy.html">Shipping &amp; Returns</a>
    <a class="nav-admin" href="/admin.html">Admin</a>
  </div>
  <button class="cart-btn" onclick="toggleCart()">Cart &nbsp;<span class="cart-count" id="cartCount">0</span></button>
</nav>

<section class="hero">
  <div class="hero-text">
    <div class="hero-eyebrow">Student-run Â· Est. 2025</div>
    <h1>Books that<br>kids <em>actually</em><br>love.</h1>
    <p class="hero-desc">Pre-loved French immersion and English titles, carefully selected and honestly described. Better prices because we sell direct.</p>
    <a class="hero-cta" href="#catalog">Browse the collection</a>
  </div>
  <div class="hero-visual">
    <div class="hero-covers" id="heroCovers">
      <!-- populated dynamically from inventory -->
    </div>
  </div>
</section>

<div class="strip">
  <div class="strip-item"><span class="strip-dot"></span>French immersion &amp; English titles</div>
  <div class="strip-item"><span class="strip-dot"></span>Better prices â€” we sell direct</div>
  <div class="strip-item"><span class="strip-dot"></span>Flat $4.99 shipping</div>
  <div class="strip-item"><span class="strip-dot"></span>7-day returns</div>
  <div class="strip-item"><span class="strip-dot"></span>Honestly described</div>
</div>

<div class="disc-bar">
  <div class="disc-item"><span class="disc-tag">15% off</span> â€” any 2 or more books</div>
  <div class="disc-item"><span class="disc-tag">25% off</span> â€” a complete series</div>
</div>

<div class="filter-bar" id="catalog">
  <span class="filter-label">Browse</span>
  <button class="filter-btn active" onclick="filterBooks('all',this)">All</button>
  <button class="filter-btn" onclick="filterBooks('fr',this)">ðŸ‡«ðŸ‡· French</button>
  <button class="filter-btn" onclick="filterBooks('en',this)">ðŸ‡ºðŸ‡¸ English</button>
  <button class="filter-btn" onclick="filterBooks('series',this)">Series</button>
  <button class="filter-btn" onclick="filterBooks('available',this)">Available</button>
  <div class="search-wrap">
    <span class="search-icon">â†³</span>
    <input type="text" id="searchInput" placeholder="Search by title or authorâ€¦" oninput="filterBooks('search',null)"/>
  </div>
</div>

<section class="catalog-section">
  <div class="catalog-header">
    <h2 class="catalog-title">The Collection</h2>
    <span class="catalog-count" id="catalogCount"></span>
  </div>
  <div class="book-grid" id="bookGrid"></div>
</section>

<section class="why-section">
  <h2 class="why-title">Why buy from <em>us?</em></h2>
  <p class="why-sub">We're kids selling books to other kids. Here's why that's a good thing.</p>
  <div class="why-grid">
    <div class="why-card"><span class="why-icon">ðŸ’°</span><h3>Better prices</h3><p>No marketplace fees means we charge less and earn more. You save every time.</p></div>
    <div class="why-card"><span class="why-icon">ðŸ“–</span><h3>Kid-curated</h3><p>We've read these books. We know which ones are worth it.</p></div>
    <div class="why-card"><span class="why-icon">ðŸ”Ž</span><h3>Honest descriptions</h3><p>Every flaw is listed. What you see is exactly what arrives.</p></div>
    <div class="why-card"><span class="why-icon">â†©</span><h3>Easy returns</h3><p>Not happy? Email us within 7 days and we'll make it right.</p></div>
  </div>
</section>

<footer>
  <div class="footer-links">
    <a href="index.html">Shop</a>
    <a href="policy.html">Shipping &amp; Returns</a>
    <a href="mailto:hello@oandabooks.com">Contact</a>
  </div>
  <p>Â© 2025 <strong>O&amp;A Books</strong> â€” oandabooks.com Â· Secure checkout via PayPal</p>
</footer>

<div class="cart-backdrop" id="cartBackdrop" onclick="toggleCart()"></div>
<div class="cart-drawer" id="cartDrawer">
  <div class="cart-head">
    <div class="cart-head-title">Your Cart</div>
    <button class="cart-close" onclick="toggleCart()">âœ•</button>
  </div>
  <div class="cart-items" id="cartItems">
    <div class="cart-empty"><p>Your cart is empty.<br>Add something wonderful.</p></div>
  </div>
  <div class="cart-footer" id="cartFooter" style="display:none;">
    <div id="cartTotals"></div>
    <div class="pay-label">Pay securely</div>
    <button class="pay-stripe" onclick="checkoutStripe()">ðŸ’³ &nbsp;Pay by card (coming soon)</button>
    <div class="pay-divider">or</div>
    <button class="pay-paypal-me" onclick="checkoutPayPal()">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M7.5 21L3 3h9.5c3.5 0 6 1.5 5.5 5.5C17.5 13 14 14.5 10.5 14.5H8L7.5 21z" fill="#003087"/><path d="M10.5 14.5H8L7.5 21l-1-5H3.5L5 9.5h5.5C14 9.5 15.5 11 15 13c-.5 1.5-2 1.5-4.5 1.5z" fill="#009cde"/></svg>
      Pay with PayPal
    </button>
    <div class="secure-note">ðŸ”’ &nbsp;Your payment details are never stored by us</div>
  </div>
</div>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
const PAYPALME    = 'josephkhoury167';
const STRIPE_LINK = '';
const SHIPPING    = 4.99;

const SAMPLE_BOOKS = [];

let cart=[], allBooks=[], currentFilter='all';

function loadBooks(){
  const saved=JSON.parse(localStorage.getItem('oa_published')||'[]');
  allBooks=[...SAMPLE_BOOKS,...saved];
  renderGrid();
  renderHeroCovers();
}

const CSS_BOOKS = [
  { title:'Le Petit Prince', author:'Saint-ExupÃ©ry', flag:'ðŸ‡«ðŸ‡·', bg:'#8b4513' },
  { title:'Harry Potter', author:'J.K. Rowling', flag:'ðŸ‡«ðŸ‡·', bg:'#3d5c3a' },
  { title:'AstÃ©rix', author:'Goscinny & Uderzo', flag:'ðŸ‡«ðŸ‡·', bg:'#c0392b' },
  { title:"Charlotte's Web", author:'E.B. White', flag:'ðŸ‡ºðŸ‡¸', bg:'#2c4a3e' },
  { title:'La Cabane Magique', author:'Mary Pope Osborne', flag:'ðŸ‡«ðŸ‡·', bg:'#5c3d2e' },
  { title:'Tintin au Tibet', author:'HergÃ©', flag:'ðŸ‡«ðŸ‡·', bg:'#1a3a5c' },
];

function renderHeroCovers(){
  const container=document.getElementById('heroCovers');
  if(!container)return;

  // Use real inventory photos if 3+ available
  const realBooks=allBooks.filter(b=>!b.sold&&b.photo);
  if(realBooks.length>=3){
    container.innerHTML=realBooks.slice(0,6).map((b,i)=>`
      <div class="hero-cover ${i===0?'tall':''}" style="background:#e8e0d8;">
        <img src="${b.photo}" alt="${b.title}" loading="lazy"/>
      </div>`).join('');
    return;
  }

  // Otherwise show styled CSS books
  container.innerHTML=CSS_BOOKS.map((b,i)=>`
    <div class="hero-cover ${i===0?'tall':''}" style="background:${b.bg};">
      <div class="css-book-flag">${b.flag}</div>
      <div class="css-book-title">${b.title}</div>
      <div class="css-book-author">${b.author}</div>
    </div>`).join('');
}

function renderGrid(){
  const grid=document.getElementById('bookGrid');
  const count=document.getElementById('catalogCount');
  grid.innerHTML='';
  const visible=filterList();
  count.textContent=`${visible.filter(b=>!b.sold).length} available`;
  if(!visible.length && !allBooks.length){grid.innerHTML=`<div class="empty-state"><p style="font-family:'Cormorant Garamond',serif;font-size:1.4rem;margin-bottom:0.5rem;">Coming soon.</p><p>We're adding books now â€” check back shortly!</p></div>`;return;}
  if(!visible.length){grid.innerHTML=`<div class="empty-state"><p>Nothing matches â€” try removing a filter.</p></div>`;return;}
  visible.forEach((book,i)=>{
    const inCart=cart.some(c=>c.id===book.id);
    const card=document.createElement('div');
    card.className='book-card';
    card.style.animationDelay=(i*0.05)+'s';
    const condShort=(book.condition||'').split(' ')[0];
    card.innerHTML=`
      <div class="book-img-wrap">
        ${book.photo?`<img src="${book.photo}" alt="${book.title}" loading="lazy"/>`:`<div class="book-placeholder">ðŸ“–</div>`}
        <div class="lang-tag">${book.lang==='fr'?'ðŸ‡«ðŸ‡·':'ðŸ‡ºðŸ‡¸'}</div>
        <div class="cond-tag">${condShort}</div>
        ${book.sold?`<div class="sold-overlay"><div class="sold-label">Sold</div></div>`:''}
      </div>
      ${book.series?`<div class="book-series">${book.series}</div>`:''}
      <div class="book-title">${book.title}</div>
      <div class="book-author">${book.author}</div>
      <div class="book-age">Ages ${book.age}</div>
      <div class="book-footer">
        <div class="book-price">$${parseFloat(book.price).toFixed(2)}</div>
        <button class="add-cart-btn ${inCart?'added':''}" onclick="addToCart('${book.id}')" ${book.sold?'disabled':''} id="cb-${book.id}">
          ${book.sold?'Sold':inCart?'âœ“ Added':'Add to cart'}
        </button>
      </div>`;
    grid.appendChild(card);
  });
}

function filterList(){
  const q=document.getElementById('searchInput').value.toLowerCase().trim();
  return allBooks.filter(b=>{
    const mf=currentFilter==='all'?true:currentFilter==='fr'?b.lang==='fr':currentFilter==='en'?b.lang==='en':currentFilter==='series'?!!b.series:currentFilter==='available'?!b.sold:true;
    const ms=!q||b.title.toLowerCase().includes(q)||b.author.toLowerCase().includes(q)||(b.series||'').toLowerCase().includes(q);
    return mf&&ms;
  });
}

function filterBooks(f,btn){
  if(f!=='search'){currentFilter=f;document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));if(btn)btn.classList.add('active');}
  renderGrid();
}

function addToCart(id){
  const book=allBooks.find(b=>b.id===id);
  if(!book||book.sold||cart.some(c=>c.id===id))return;
  cart.push({...book});
  updateCartUI();
  const cc=document.getElementById('cartCount');
  cc.classList.remove('bump');void cc.offsetWidth;cc.classList.add('bump');
  const btn=document.getElementById('cb-'+id);
  if(btn){btn.textContent='âœ“ Added';btn.classList.add('added');}
}

function removeFromCart(id){cart=cart.filter(c=>c.id!==id);updateCartUI();renderGrid();}

function calcDiscount(){
  const n=cart.length;if(!n)return{rate:0,label:''};
  const sg={};cart.forEach(b=>{if(b.series)sg[b.series]=(sg[b.series]||0)+1;});
  if(Object.values(sg).some(v=>v>=2))return{rate:0.25,label:'Series discount (25% off)'};
  if(n>=2)return{rate:0.15,label:'Multi-book discount (15% off)'};
  return{rate:0,label:''};
}

function getCartTotals(){
  const{rate}=calcDiscount();
  const subtotal=cart.reduce((s,b)=>s+parseFloat(b.price),0);
  const discAmt=subtotal*rate;
  return{subtotal,discAmt,total:subtotal-discAmt+SHIPPING};
}

function updateCartUI(){
  document.getElementById('cartCount').textContent=cart.length;
  const itemsEl=document.getElementById('cartItems');
  const footerEl=document.getElementById('cartFooter');
  if(!cart.length){itemsEl.innerHTML=`<div class="cart-empty"><p>Your cart is empty.<br>Add something wonderful.</p></div>`;footerEl.style.display='none';return;}
  const{rate,label}=calcDiscount();
  const{subtotal,discAmt,total}=getCartTotals();
  let html='';
  cart.forEach(b=>{html+=`<div class="cart-item"><div class="ci-img">${b.photo?`<img src="${b.photo}" alt="${b.title}"/>`:'ðŸ“–'}</div><div class="ci-info"><div class="ci-title">${b.title}</div><div class="ci-author">${b.author}</div><div class="ci-price">$${parseFloat(b.price).toFixed(2)}${rate>0?`<span class="ci-disc"> â†’ $${(b.price*(1-rate)).toFixed(2)}</span>`:''}</div></div><button class="ci-remove" onclick="removeFromCart('${b.id}')">âœ•</button></div>`;});
  if(rate>0)html+=`<div class="cart-disc-note">${label} applied</div>`;
  itemsEl.innerHTML=html;
  document.getElementById('cartTotals').innerHTML=`
    <div class="total-row"><span>Subtotal</span><span>$${subtotal.toFixed(2)}</span></div>
    ${rate>0?`<div class="total-row discount"><span>${label}</span><span>âˆ’$${discAmt.toFixed(2)}</span></div>`:''}
    <div class="total-row"><span>Shipping</span><span>$${SHIPPING.toFixed(2)}</span></div>
    <div class="total-row grand"><span>Total</span><span>$${total.toFixed(2)}</span></div>`;
  footerEl.style.display='block';
}

function toggleCart(){
  document.getElementById('cartDrawer').classList.toggle('open');
  document.getElementById('cartBackdrop').classList.toggle('open');
}

function checkoutPayPal(){
  if(!cart.length)return;
  const{total}=getCartTotals();
  const bookList=cart.map(b=>b.title).join(', ');
  const note=encodeURIComponent('O&A Books: '+bookList+' (incl. $'+SHIPPING.toFixed(2)+' shipping)');
  window.open('https://www.paypal.me/'+PAYPALME+'/'+total.toFixed(2)+'USD?note='+note,'_blank');
  setTimeout(()=>{alert('After paying, please email us at hello@oandabooks